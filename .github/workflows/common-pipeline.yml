name: Common Pipeline

on:
  workflow_call:
    inputs:
      Technology:
        required: true
        type: string

jobs:
  CheckOut-Stage:
    runs-on: sample2
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

  Build-Stage:
    needs: [CheckOut-Stage]
    runs-on: sample2
    steps:
      - name: Build Application For Java
        if: ${{ inputs.Technology == 'java' }}
        run: |
          sudo docker build -t java-spring-image:latest .
          sudo docker images

      - name: Build Application For Node.js
        if: ${{ inputs.Technology == 'nodejs' }}
        run: |
          sudo docker build -t nodejs-pharmacy-node:latest .
          sudo docker images    

      - name: Build Application For Python
        if: ${{ inputs.Technology == 'python' }}
        run: |
          sudo docker build -t python-crude-example:latest .
          sudo docker images
